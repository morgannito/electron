<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'">
    <link href="../assets/styles.css" rel="stylesheet">
    <title>MyEleBack</title>
  </head>
  <body>
    <header>
      <h1>MyEleBack</h1>
      <nav>
        <ul>
          <li><a href="#">Home</a></li>
          <li><a href="#">Backups</a></li>
          <li><a href="#">Settings</a></li>
        </ul>
      </nav>
    </header>

    <main>
      <h2>Welcome to MyEleBack</h2>
      <p>Here you can view and manage your MySQL backups.</p>

      <section class="backups">
        <h3>Backups</h3>
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Date (y/m/d)</th>
              <th>Time (24h)</th>
              <th>Size</th>
              <th>Type</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="backupTableBody">
            <!-- Backup data will be populated here -->
          </tbody>
        </table>
        <button class="backup-now">Backup Now</button>
      </section>
    </main>

    <footer>
      <p>&copy; 2023 MyEleBack, by TheTreeSee & Morgannito</p>
    </footer>

    <!-- You can also require other files to run in this process -->
    <script src="../renderer.js"></script>
    <script>
    const sqlite3 = require('sqlite3').verbose();

    const db = new sqlite3.Database('path/to/database.db', (err) => {
      if (err) {
      console.error(err.message);
      }
      console.log('Connected to the database.');
    });

    const sql = 'SELECT * FROM my_table';

    db.all(sql, [], (err, rows) => {
      if (err) {
        console.error(err.message);
      }
      console.log(rows);

      const table = document.getElementById('table-body');

      rows.forEach((row) => {
        const tr = document.createElement('tr');
        const tdId = document.createElement('td');
        tdId.textContent = row.id;
        tr.appendChild(tdId);
        const tdDate = document.createElement('td');
        tdDate.textContent = row.date;
        tr.appendChild(tdDate);
        const tdTime = document.createElement('td');
        tdTime.textContent = row.time;
        tr.appendChild(tdTime);
        const tdSize = document.createElement('td');
        tdSize.textContent = row.size;
        tr.appendChild(tdSize);
        const tdType = document.createElement('td');
        tdType.textContent = row.type;
        tr.appendChild(tdType);
        const tdLocation = document.createElement('td');
        tdLocation.textContent = row.location;
        tr.appendChild(tdLocation);
        table.appendChild(tr);
      });
    });
    </script>
  </body>
</html>
